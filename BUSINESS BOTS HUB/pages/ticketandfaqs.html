<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Support Ticket System</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #0f0f0f;
      --bg-secondary: #1a1a1a;
      --bg-tertiary: #2a2a2a;
      --text-primary: #ffffff;
      --text-secondary: #b3b3b3;
      --text-muted: #666666;
      --accent: #4f46e5;
      --accent-hover: #3730a3;
      --success: #059669;
      --warning: #d97706;
      --error: #dc2626;
      --border: #333333;
      --border-light: #404040;
      --shadow: rgba(0, 0, 0, 0.5);
      --radius: 8px;
      --radius-lg: 12px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 2rem 1rem;
      line-height: 1.6;
    }

    .container {
      width: 100%;
      max-width: 1200px;
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 3rem;
      align-items: start;
    }

    .main-card {
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
      padding: 3rem;
      border: 1px solid var(--border);
      box-shadow: 0 20px 40px var(--shadow);
    }

    .sidebar {
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
      padding: 2rem;
      border: 1px solid var(--border);
      box-shadow: 0 20px 40px var(--shadow);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 3rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border);
    }

    .title {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-primary);
      letter-spacing: -0.025em;
    }

    .lang-switch {
      display: flex;
      background: var(--bg-tertiary);
      border-radius: var(--radius);
      padding: 4px;
      border: 1px solid var(--border);
    }

    .lang-btn {
      background: transparent;
      border: none;
      color: var(--text-muted);
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-weight: 500;
      border-radius: 4px;
      transition: all 0.2s ease;
      font-size: 0.875rem;
      font-family: inherit;
    }

    .lang-btn.active {
      color: var(--text-primary);
      background: var(--accent);
    }

    .lang-btn:hover:not(.active) {
      color: var(--text-secondary);
      background: var(--bg-primary);
    }

    .form-section {
      margin-bottom: 2.5rem;
    }

    .section-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--border);
    }

    .field {
      margin-bottom: 1.5rem;
    }

    .field-group {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      color: var(--text-secondary);
      font-size: 0.875rem;
      font-weight: 500;
    }

    .required {
      color: var(--error);
      margin-left: 0.25rem;
    }

    input, select, textarea {
      width: 100%;
      padding: 0.875rem 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--bg-tertiary);
      color: var(--text-primary);
      font-size: 0.875rem;
      font-family: inherit;
      transition: all 0.2s ease;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }

    input::placeholder, textarea::placeholder {
      color: var(--text-muted);
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    select {
      cursor: pointer;
    }

    .priority-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.75rem;
      margin-top: 0.5rem;
    }

    .priority-option {
      padding: 0.75rem 0.5rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: var(--bg-tertiary);
      color: var(--text-muted);
      cursor: pointer;
      text-align: center;
      font-weight: 500;
      font-size: 0.75rem;
      transition: all 0.2s ease;
    }

    .priority-option:hover {
      border-color: var(--accent);
      color: var(--text-secondary);
    }

    .priority-option.selected {
      border-color: var(--accent);
      background: rgba(79, 70, 229, 0.1);
      color: var(--text-primary);
    }

    .priority-low.selected { 
      border-color: var(--success); 
      background: rgba(5, 150, 105, 0.1); 
    }

    .priority-medium.selected { 
      border-color: var(--warning); 
      background: rgba(217, 119, 6, 0.1); 
    }

    .priority-high.selected { 
      border-color: var(--error); 
      background: rgba(220, 38, 38, 0.1); 
    }

    .priority-urgent.selected { 
      border-color: #b91c1c; 
      background: rgba(185, 28, 28, 0.1); 
    }

    .file-upload {
      border: 2px dashed var(--border);
      border-radius: var(--radius);
      padding: 2rem;
      text-align: center;
      background: var(--bg-tertiary);
      transition: all 0.2s ease;
      cursor: pointer;
    }

    .file-upload:hover {
      border-color: var(--accent);
      background: var(--bg-primary);
    }

    .file-upload.dragover {
      border-color: var(--accent);
      background: rgba(79, 70, 229, 0.05);
    }

    .upload-text {
      color: var(--text-secondary);
      font-weight: 500;
      margin-bottom: 0.5rem;
    }

    .upload-hint {
      color: var(--text-muted);
      font-size: 0.75rem;
    }

    .file-list {
      margin-top: 1rem;
    }

    .file-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem;
      background: var(--bg-tertiary);
      border-radius: var(--radius);
      margin-bottom: 0.5rem;
      border: 1px solid var(--border);
    }

    .file-info {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .file-name {
      color: var(--text-primary);
      font-weight: 500;
      font-size: 0.875rem;
    }

    .file-size {
      color: var(--text-muted);
      font-size: 0.75rem;
    }

    .remove-file {
      background: var(--error);
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.25rem 0.5rem;
      cursor: pointer;
      font-size: 0.75rem;
      font-weight: 500;
      transition: all 0.2s ease;
    }

    .remove-file:hover {
      background: #b91c1c;
    }

    .btn {
      width: 100%;
      padding: 1rem 2rem;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      font-size: 0.875rem;
      font-family: inherit;
      transition: all 0.2s ease;
      margin-top: 2rem;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn:hover:not(:disabled) {
      background: var(--accent-hover);
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover:not(:disabled) {
      background: var(--bg-primary);
      border-color: var(--border-light);
    }

    /* Sidebar Styles */
    .sidebar-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--border);
    }

    .info-section {
      margin-bottom: 2rem;
    }

    .info-title {
      font-size: 0.875rem;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 1rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .info-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 0;
      border-bottom: 1px solid var(--border);
    }

    .info-item:last-child {
      border-bottom: none;
    }

    .info-label {
      color: var(--text-muted);
      font-size: 0.75rem;
    }

    .info-value {
      color: var(--text-primary);
      font-weight: 500;
      font-size: 0.75rem;
    }

    .status-badge {
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.625rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .status-draft {
      background: rgba(102, 102, 102, 0.2);
      color: var(--text-muted);
    }

    .status-operational {
      background: rgba(5, 150, 105, 0.2);
      color: var(--success);
    }

    .recent-tickets {
      list-style: none;
    }

    .recent-ticket {
      padding: 1rem;
      background: var(--bg-tertiary);
      border-radius: var(--radius);
      margin-bottom: 0.75rem;
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .recent-ticket:hover {
      background: var(--bg-primary);
      border-color: var(--border-light);
    }

    .ticket-id {
      font-size: 0.625rem;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .ticket-subject {
      color: var(--text-primary);
      font-weight: 500;
      font-size: 0.75rem;
      margin-bottom: 0.25rem;
    }

    .ticket-date {
      font-size: 0.625rem;
      color: var(--text-muted);
    }

    /* Loading States */
    .loading {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .spinner {
      width: 16px;
      height: 16px;
      border: 2px solid transparent;
      border-top: 2px solid currentColor;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .success-message {
      background: rgba(5, 150, 105, 0.1);
      border: 1px solid var(--success);
      color: var(--success);
      padding: 1rem;
      border-radius: var(--radius);
      margin-bottom: 1.5rem;
      font-size: 0.875rem;
      font-weight: 500;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .container {
        grid-template-columns: 1fr;
        max-width: 600px;
        gap: 2rem;
      }
      
      .main-card, .sidebar {
        padding: 2rem;
      }
      
      .title {
        font-size: 1.5rem;
      }
      
      .field-group {
        grid-template-columns: 1fr;
      }
      
      .priority-grid {
        grid-template-columns: 1fr 1fr;
      }
      
      .header {
        flex-direction: column;
        gap: 1rem;
        align-items: stretch;
      }
    }

    /* Animations */
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .slide-up {
      animation: slideUp 0.3s ease-out;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(15px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <div class="container fade-in">
    <!-- Main Form Card -->
    <div class="main-card">
      <div class="header">
        <h1 class="title" id="title">New Ticket</h1>
        <div class="lang-switch" id="lang-switch"></div>
      </div>

      <form id="ticketForm">
        <!-- Basic Information Section -->
        <div class="form-section">
          <h3 class="section-title" id="section-basic">Basic Information</h3>
          
          <div class="field">
            <label for="category">
              <span id="label-category">Category</span>
              <span class="required">*</span>
            </label>
            <select id="category" required>
              <option value="" id="category-placeholder">Select category...</option>
            </select>
          </div>

          <div class="field">
            <label for="subject">
              <span id="label-subject">Subject</span>
              <span class="required">*</span>
            </label>
            <input type="text" id="subject" required />
          </div>

          <div class="field">
            <label for="description">
              <span id="label-description">Description</span>
              <span class="required">*</span>
            </label>
            <textarea id="description" required></textarea>
          </div>

          <div class="field">
            <label for="phone">
              <span id="label-phone">Phone</span>
              <span class="required">*</span>
            </label>
            <input type="tel" id="phone" required />
          </div>
        </div>

        <!-- Priority Section -->
        <div class="form-section">
          <h3 class="section-title" id="section-priority">Priority</h3>
          
          <div class="field">
            <label id="label-priority-level">Priority Level</label>
            <div class="priority-grid">
              <div class="priority-option priority-low" data-priority="low">
                <div id="priority-low-text">Low</div>
                <small id="priority-low-desc">Not urgent</small>
              </div>
              <div class="priority-option priority-medium selected" data-priority="medium">
                <div id="priority-medium-text">Medium</div>
                <small id="priority-medium-desc">Normal</small>
              </div>
              <div class="priority-option priority-high" data-priority="high">
                <div id="priority-high-text">High</div>
                <small id="priority-high-desc">Important</small>
              </div>
              <div class="priority-option priority-urgent" data-priority="urgent">
                <div id="priority-urgent-text">Urgent</div>
                <small id="priority-urgent-desc">Critical</small>
              </div>
            </div>
          </div>
        </div>

        <!-- File Upload Section -->
        <div class="form-section">
          <h3 class="section-title" id="section-attachments">Attachments</h3>
          
          <div class="field">
            <div class="file-upload" id="fileUpload">
              <div class="upload-text" id="upload-text">Drag files here or click to select</div>
              <div class="upload-hint" id="upload-hint">Maximum 10MB per file. Formats: PDF, DOC, JPG, PNG, TXT</div>
              <input type="file" id="fileInput" multiple accept=".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt,.zip" style="display: none;">
            </div>
            <div class="file-list" id="fileList"></div>
          </div>
        </div>

        <button type="submit" class="btn" id="submitBtn">
          <span id="btn-submit">Send Ticket</span>
        </button>
      </form>
    </div>

    <!-- Sidebar -->
    <div class="sidebar slide-up">
      <h2 class="sidebar-title" id="sidebar-title">System Status</h2>

      <!-- Current Ticket Info -->
      <div class="info-section">
        <h3 class="info-title" id="info-current">Current Ticket</h3>
        <div class="info-item">
          <span class="info-label" id="info-status-label">Status:</span>
          <span class="status-badge status-draft" id="ticket-status">Draft</span>
        </div>
        <div class="info-item">
          <span class="info-label" id="info-id-label">ID:</span>
          <span class="info-value" id="ticket-id">TK-2024-001</span>
        </div>
        <div class="info-item">
          <span class="info-label" id="info-created-label">Created:</span>
          <span class="info-value" id="ticket-created">Now</span>
        </div>
      </div>

      <!-- System Status -->
      <div class="info-section">
        <h3 class="info-title" id="info-system">System Status</h3>
        <div class="info-item">
          <span class="info-label" id="system-status-label">Services:</span>
          <span class="status-badge status-operational" id="system-status">Operational</span>
        </div>
        <div class="info-item">
          <span class="info-label" id="response-time-label">Response Time:</span>
          <span class="info-value" id="response-time">< 2 hours</span>
        </div>
        <div class="info-item">
          <span class="info-label" id="queue-label">Queue:</span>
          <span class="info-value" id="queue-count">12 pending</span>
        </div>
      </div>

      <!-- Recent Tickets -->
      <div class="info-section">
        <h3 class="info-title" id="info-recent">Recent Tickets</h3>
        <ul class="recent-tickets">
          <li class="recent-ticket">
            <div class="ticket-id">#TK-2024-045</div>
            <div class="ticket-subject" id="recent-1">Printer connection issue</div>
            <div class="ticket-date" id="recent-1-date">2 hours ago</div>
          </li>
          <li class="recent-ticket">
            <div class="ticket-id">#TK-2024-044</div>
            <div class="ticket-subject" id="recent-2">Software installation error</div>
            <div class="ticket-date" id="recent-2-date">4 hours ago</div>
          </li>
          <li class="recent-ticket">
            <div class="ticket-id">#TK-2024-043</div>
            <div class="ticket-subject" id="recent-3">Network access request</div>
            <div class="ticket-date" id="recent-3-date">Yesterday</div>
          </li>
        </ul>
      </div>

      <!-- Quick Actions -->
      <button class="btn btn-secondary" id="viewAllTickets">
        <span id="btn-view-all">View All Tickets</span>
      </button>
    </div>
  </div>

  <script>
    class TicketSystem {
      constructor() {
        this.currentLang = localStorage.getItem('lang') || 'EN';
        this.selectedPriority = 'medium';
        this.uploadedFiles = [];
        this.ticketCounter = 1;
        
        this.translations = {
          ES: {
            title: 'Nuevo Ticket',
            'section-basic': 'Información Básica',
            'section-priority': 'Prioridad',
            'section-attachments': 'Archivos Adjuntos',
            'label-category': 'Categoría',
            'label-subject': 'Asunto',
            'label-description': 'Descripción',
            'label-phone': 'Teléfono',
            'label-priority-level': 'Nivel de Prioridad',
            'btn-submit': 'Enviar Ticket',
            'btn-view-all': 'Ver Todos los Tickets',
            'sidebar-title': 'Estado del Sistema',
            'info-current': 'Ticket Actual',
            'info-system': 'Estado del Sistema',
            'info-recent': 'Tickets Recientes',
            'info-status-label': 'Estado:',
            'info-id-label': 'ID:',
            'info-created-label': 'Creado:',
            'system-status-label': 'Servicios:',
            'response-time-label': 'Tiempo de Respuesta:',
            'queue-label': 'Cola:',
            'upload-text': 'Arrastra archivos aquí o haz clic para seleccionar',
            'upload-hint': 'Máximo 10MB por archivo. Formatos: PDF, DOC, JPG, PNG, TXT',
            'category-placeholder': 'Seleccionar categoría...',
            'priority-low-text': 'Baja',
            'priority-low-desc': 'No urgente',
            'priority-medium-text': 'Media',
            'priority-medium-desc': 'Normal',
            'priority-high-text': 'Alta',
            'priority-high-desc': 'Importante',
            'priority-urgent-text': 'Urgente',
            'priority-urgent-desc': 'Crítico',
            'ticket-status': 'Borrador',
            'ticket-created': 'Ahora',
            'system-status': 'Operativo',
            'response-time': '< 2 horas',
            'queue-count': '12 pendientes',
            'recent-1': 'Problema con impresora',
            'recent-1-date': 'Hace 2 horas',
            'recent-2': 'Error de instalación de software',
            'recent-2-date': 'Hace 4 horas',
            'recent-3': 'Solicitud de acceso a red',
            'recent-3-date': 'Ayer',
            categories: ['Soporte Técnico', 'Facturación', 'Devoluciones', 'Hardware', 'Software', 'Red/Internet', 'Otros'],
            placeholders: {
              subject: 'Resumen breve del problema',
              description: 'Describe tu problema en detalle',
              phone: '+34 600 000 000'
            }
          },
          EN: {
            title: 'New Ticket',
            'section-basic': 'Basic Information',
            'section-priority': 'Priority',
            'section-attachments': 'Attachments',
            'label-category': 'Category',
            'label-subject': 'Subject',
            'label-description': 'Description',
            'label-phone': 'Phone',
            'label-priority-level': 'Priority Level',
            'btn-submit': 'Send Ticket',
            'btn-view-all': 'View All Tickets',
            'sidebar-title': 'System Status',
            'info-current': 'Current Ticket',
            'info-system': 'System Status',
            'info-recent': 'Recent Tickets',
            'info-status-label': 'Status:',
            'info-id-label': 'ID:',
            'info-created-label': 'Created:',
            'system-status-label': 'Services:',
            'response-time-label': 'Response Time:',
            'queue-label': 'Queue:',
            'upload-text': 'Drag files here or click to select',
            'upload-hint': 'Maximum 10MB per file. Formats: PDF, DOC, JPG, PNG, TXT',
            'category-placeholder': 'Select category...',
            'priority-low-text': 'Low',
            'priority-low-desc': 'Not urgent',
            'priority-medium-text': 'Medium',
            'priority-medium-desc': 'Normal',
            'priority-high-text': 'High',
            'priority-high-desc': 'Important',
            'priority-urgent-text': 'Urgent',
            'priority-urgent-desc': 'Critical',
            'ticket-status': 'Draft',
            'ticket-created': 'Now',
            'system-status': 'Operational',
            'response-time': '< 2 hours',
            'queue-count': '12 pending',
            'recent-1': 'Printer connection issue',
            'recent-1-date': '2 hours ago',
            'recent-2': 'Software installation error',
            'recent-2-date': '4 hours ago',
            'recent-3': 'Network access request',
            'recent-3-date': 'Yesterday',
            categories: ['Technical Support', 'Billing', 'Returns', 'Hardware', 'Software', 'Network/Internet', 'Other'],
            placeholders: {
              subject: 'Brief problem summary',
              description: 'Describe your problem in detail',
              phone: '+1 555 000 0000'
            }
          },
          FR: {
            title: 'Nouveau Ticket',
            'section-basic': 'Informations de Base',
            'section-priority': 'Priorité',
            'section-attachments': 'Pièces Jointes',
            'label-category': 'Catégorie',
            'label-subject': 'Objet',
            'label-description': 'Description',
            'label-phone': 'Téléphone',
            'label-priority-level': 'Niveau de Priorité',
            'btn-submit': 'Envoyer Ticket',
            'btn-view-all': 'Voir Tous les Tickets',
            'sidebar-title': 'État du Système',
            'info-current': 'Ticket Actuel',
            'info-system': 'État du Système',
            'info-recent': 'Tickets Récents',
            'info-status-label': 'État:',
            'info-id-label': 'ID:',
            'info-created-label': 'Créé:',
            'system-status-label': 'Services:',
            'response-time-label': 'Temps de Réponse:',
            'queue-label': 'File d\'Attente:',
            'upload-text': 'Glissez les fichiers ici ou cliquez pour sélectionner',
            'upload-hint': 'Maximum 10MB par fichier. Formats: PDF, DOC, JPG, PNG, TXT',
            'category-placeholder': 'Sélectionner une catégorie...',
            'priority-low-text': 'Faible',
            'priority-low-desc': 'Pas urgent',
            'priority-medium-text': 'Moyen',
            'priority-medium-desc': 'Normal',
            'priority-high-text': 'Élevé',
            'priority-high-desc': 'Important',
            'priority-urgent-text': 'Urgent',
            'priority-urgent-desc': 'Critique',
            'ticket-status': 'Brouillon',
            'ticket-created': 'Maintenant',
            'system-status': 'Opérationnel',
            'response-time': '< 2 heures',
            'queue-count': '12 en attente',
            'recent-1': 'Problème de connexion imprimante',
            'recent-1-date': 'Il y a 2 heures',
            'recent-2': 'Erreur d\'installation logiciel',
            'recent-2-date': 'Il y a 4 heures',
            'recent-3': 'Demande d\'accès réseau',
            'recent-3-date': 'Hier',
            categories: ['Support Technique', 'Facturation', 'Retours', 'Matériel', 'Logiciel', 'Réseau/Internet', 'Autre'],
            placeholders: {
              subject: 'Résumé bref du problème',
              description: 'Décrivez votre problème en détail',
              phone: '+33 1 00 00 00 00'
            }
          },
          DE: {
            title: 'Neues Ticket',
            'section-basic': 'Grundinformationen',
            'section-priority': 'Priorität',
            'section-attachments': 'Anhänge',
            'label-category': 'Kategorie',
            'label-subject': 'Betreff',
            'label-description': 'Beschreibung',
            'label-phone': 'Telefon',
            'label-priority-level': 'Prioritätsstufe',
            'btn-submit': 'Ticket Senden',
            'btn-view-all': 'Alle Tickets Anzeigen',
            'sidebar-title': 'Systemstatus',
            'info-current': 'Aktuelles Ticket',
            'info-system': 'Systemstatus',
            'info-recent': 'Aktuelle Tickets',
            'info-status-label': 'Status:',
            'info-id-label': 'ID:',
            'info-created-label': 'Erstellt:',
            'system-status-label': 'Dienste:',
            'response-time-label': 'Antwortzeit:',
            'queue-label': 'Warteschlange:',
            'upload-text': 'Dateien hier ablegen oder klicken zum Auswählen',
            'upload-hint': 'Maximum 10MB pro Datei. Formate: PDF, DOC, JPG, PNG, TXT',
            'category-placeholder': 'Kategorie auswählen...',
            'priority-low-text': 'Niedrig',
            'priority-low-desc': 'Nicht dringend',
            'priority-medium-text': 'Mittel',
            'priority-medium-desc': 'Normal',
            'priority-high-text': 'Hoch',
            'priority-high-desc': 'Wichtig',
            'priority-urgent-text': 'Dringend',
            'priority-urgent-desc': 'Kritisch',
            'ticket-status': 'Entwurf',
            'ticket-created': 'Jetzt',
            'system-status': 'Betriebsbereit',
            'response-time': '< 2 Stunden',
            'queue-count': '12 ausstehend',
            'recent-1': 'Druckerverbindungsproblem',
            'recent-1-date': 'Vor 2 Stunden',
            'recent-2': 'Software-Installationsfehler',
            'recent-2-date': 'Vor 4 Stunden',
            'recent-3': 'Netzwerkzugangsanfrage',
            'recent-3-date': 'Gestern',
            categories: ['Technischer Support', 'Abrechnung', 'Rücksendungen', 'Hardware', 'Software', 'Netzwerk/Internet', 'Andere'],
            placeholders: {
              subject: 'Kurze Problemzusammenfassung',
              description: 'Beschreiben Sie Ihr Problem im Detail',
              phone: '+49 30 00000000'
            }
          },
          IT: {
            title: 'Nuovo Ticket',
            'section-basic': 'Informazioni di Base',
            'section-priority': 'Priorità',
            'section-attachments': 'Allegati',
            'label-category': 'Categoria',
            'label-subject': 'Oggetto',
            'label-description': 'Descrizione',
            'label-phone': 'Telefono',
            'label-priority-level': 'Livello di Priorità',
            'btn-submit': 'Invia Ticket',
            'btn-view-all': 'Visualizza Tutti i Ticket',
            'sidebar-title': 'Stato del Sistema',
            'info-current': 'Ticket Corrente',
            'info-system': 'Stato del Sistema',
            'info-recent': 'Ticket Recenti',
            'info-status-label': 'Stato:',
            'info-id-label': 'ID:',
            'info-created-label': 'Creato:',
            'system-status-label': 'Servizi:',
            'response-time-label': 'Tempo di Risposta:',
            'queue-label': 'Coda:',
            'upload-text': 'Trascina i file qui o clicca per selezionare',
            'upload-hint': 'Massimo 10MB per file. Formati: PDF, DOC, JPG, PNG, TXT',
            'category-placeholder': 'Seleziona categoria...',
            'priority-low-text': 'Bassa',
            'priority-low-desc': 'Non urgente',
            'priority-medium-text': 'Media',
            'priority-medium-desc': 'Normale',
            'priority-high-text': 'Alta',
            'priority-high-desc': 'Importante',
            'priority-urgent-text': 'Urgente',
            'priority-urgent-desc': 'Critico',
            'ticket-status': 'Bozza',
            'ticket-created': 'Ora',
            'system-status': 'Operativo',
            'response-time': '< 2 ore',
            'queue-count': '12 in attesa',
            'recent-1': 'Problema connessione stampante',
            'recent-1-date': '2 ore fa',
            'recent-2': 'Errore installazione software',
            'recent-2-date': '4 ore fa',
            'recent-3': 'Richiesta accesso rete',
            'recent-3-date': 'Ieri',
            categories: ['Supporto Tecnico', 'Fatturazione', 'Resi', 'Hardware', 'Software', 'Rete/Internet', 'Altro'],
            placeholders: {
              subject: 'Breve riassunto del problema',
              description: 'Descrivi il tuo problema in dettaglio',
              phone: '+39 06 00000000'
            }
          }
        };
        
        this.init();
      }

      init() {
        this.renderLangButtons();
        this.setupEventListeners();
        this.populateCategories();
        this.updateTicketId();
        this.setupFileUpload();
        this.applyLanguage(this.currentLang);
      }

      renderLangButtons() {
        const langSwitch = document.getElementById('lang-switch');
        Object.keys(this.translations).forEach(code => {
          const btn = document.createElement('button');
          btn.textContent = code;
          btn.className = 'lang-btn';
          btn.dataset.lang = code;
          btn.addEventListener('click', () => this.switchLanguage(code));
          langSwitch.appendChild(btn);
        });
      }

      setupEventListeners() {
        // Priority selection
        document.querySelectorAll('.priority-option').forEach(option => {
          option.addEventListener('click', () => {
            document.querySelectorAll('.priority-option').forEach(opt => opt.classList.remove('selected'));
            option.classList.add('selected');
            this.selectedPriority = option.dataset.priority;
          });
        });

        // Form submission
        document.getElementById('ticketForm').addEventListener('submit', (e) => {
          e.preventDefault();
          this.submitTicket();
        });

        // View all tickets
        document.getElementById('viewAllTickets').addEventListener('click', () => {
          this.showAllTickets();
        });

        // Real-time validation
        ['subject', 'description', 'phone', 'category'].forEach(field => {
          document.getElementById(field).addEventListener('input', () => this.validateForm());
          document.getElementById(field).addEventListener('change', () => this.validateForm());
        });
      }

      switchLanguage(lang) {
        this.currentLang = lang;
        localStorage.setItem('lang', lang);
        this.applyLanguage(lang);
      }

      applyLanguage(lang) {
        const t = this.translations[lang];
        
        // Update active language button
        document.querySelectorAll('.lang-btn').forEach(btn => {
          btn.classList.toggle('active', btn.dataset.lang === lang);
        });

        // Update all translatable elements
        Object.keys(t).forEach(key => {
          const element = document.getElementById(key);
          if (element && key !== 'categories' && key !== 'placeholders') {
            element.textContent = t[key];
          }
        });

        // Update placeholders
        Object.keys(t.placeholders).forEach(field => {
          const element = document.getElementById(field);
          if (element) {
            element.placeholder = t.placeholders[field];
          }
        });

        this.populateCategories();
      }

      populateCategories() {
        const t = this.translations[this.currentLang];
        const categorySelect = document.getElementById('category');
        const currentValue = categorySelect.value;
        
        // Clear existing options
        categorySelect.innerHTML = `<option value="">${t['category-placeholder']}</option>`;
        
        // Add category options
        t.categories.forEach(category => {
          const option = document.createElement('option');
          option.value = category;
          option.textContent = category;
          categorySelect.appendChild(option);
        });

        // Restore previous selection if it exists
        if (currentValue && t.categories.includes(currentValue)) {
          categorySelect.value = currentValue;
        }
      }

      setupFileUpload() {
        const fileUpload = document.getElementById('fileUpload');
        const fileInput = document.getElementById('fileInput');

        fileUpload.addEventListener('click', () => fileInput.click());
        
        fileUpload.addEventListener('dragover', (e) => {
          e.preventDefault();
          fileUpload.classList.add('dragover');
        });
        
        fileUpload.addEventListener('dragleave', () => {
          fileUpload.classList.remove('dragover');
        });
        
        fileUpload.addEventListener('drop', (e) => {
          e.preventDefault();
          fileUpload.classList.remove('dragover');
          this.handleFiles(e.dataTransfer.files);
        });

        fileInput.addEventListener('change', (e) => {
          this.handleFiles(e.target.files);
        });
      }

      handleFiles(files) {
        Array.from(files).forEach(file => {
          if (file.size > 10 * 1024 * 1024) { // 10MB limit
            alert(`File ${file.name} is too large. Maximum size is 10MB.`);
            return;
          }

          const fileObj = {
            id: Date.now() + Math.random(),
            name: file.name,
            size: this.formatFileSize(file.size),
            file: file
          };

          this.uploadedFiles.push(fileObj);
          this.renderFileList();
        });
      }

      formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      }

      renderFileList() {
        const fileList = document.getElementById('fileList');
        fileList.innerHTML = '';

        this.uploadedFiles.forEach(file => {
          const fileItem = document.createElement('div');
          fileItem.className = 'file-item';
          fileItem.innerHTML = `
            <div class="file-info">
              <div>
                <div class="file-name">${file.name}</div>
                <div class="file-size">${file.size}</div>
              </div>
            </div>
            <button type="button" class="remove-file" onclick="ticketSystem.removeFile('${file.id}')">
              Remove
            </button>
          `;
          fileList.appendChild(fileItem);
        });
      }

      removeFile(fileId) {
        this.uploadedFiles = this.uploadedFiles.filter(file => file.id !== fileId);
        this.renderFileList();
      }

      validateForm() {
        const subject = document.getElementById('subject').value.trim();
        const description = document.getElementById('description').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const category = document.getElementById('category').value;

        // Phone validation regex for international format
        const phoneRegex = /^\+\d{2}\s?\d{9,}$/;
        const isValid = subject && description && category && phoneRegex.test(phone);
        
        document.getElementById('submitBtn').disabled = !isValid;
        return isValid;
      }

      async submitTicket() {
        if (!this.validateForm()) {
          alert('Please fill in all required fields correctly.');
          return;
        }

        const submitBtn = document.getElementById('submitBtn');
        const originalText = submitBtn.textContent;
        
        // Show loading state
        submitBtn.innerHTML = '<div class="loading"><div class="spinner"></div> Sending...</div>';
        submitBtn.disabled = true;

        try {
          // Get form data
          const category = document.getElementById('category').value;
          const subject = document.getElementById('subject').value;
          const description = document.getElementById('description').value;
          const phone = document.getElementById('phone').value;
          
          const t = this.translations[this.currentLang];
          
          // Create email content
          const emailSubject = `${t.title} - ${subject}`;
          const emailBody = `${t.title}\n\n` +
            `${t['label-category']}: ${category}\n` +
            `${t['label-subject']}: ${subject}\n` +
            `${t['label-description']}: ${description}\n` +
            `${t['label-phone']}: ${phone}\n` +
            `${t['label-priority-level']}: ${this.selectedPriority}\n\n` +
            `Ticket ID: TK-2024-${String(this.ticketCounter).padStart(3, '0')}`;

          // Create mailto link
          const mailtoLink = `mailto:businessbots.info@gmail.com?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
          
          // Simulate processing time
          await new Promise(resolve => setTimeout(resolve, 1500));
          
          // Open email client
          window.open(mailtoLink, '_blank');

          // Show success message
          const successMessage = document.createElement('div');
          successMessage.className = 'success-message fade-in';
          successMessage.innerHTML = `
            <strong>Email client opened successfully!</strong><br>
            Your ticket ID is: <strong>TK-2024-${String(this.ticketCounter).padStart(3, '0')}</strong>
          `;

          const form = document.getElementById('ticketForm');
          form.parentNode.insertBefore(successMessage, form);

          // Reset form
          this.resetForm();

          // Remove success message after 5 seconds
          setTimeout(() => {
            successMessage.remove();
          }, 5000);

        } catch (error) {
          alert('Error processing ticket. Please try again.');
        } finally {
          submitBtn.textContent = originalText;
          submitBtn.disabled = false;
        }
      }

      resetForm() {
        document.getElementById('ticketForm').reset();
        this.uploadedFiles = [];
        this.renderFileList();
        this.selectedPriority = 'medium';
        document.querySelectorAll('.priority-option').forEach(opt => opt.classList.remove('selected'));
        document.querySelector('[data-priority="medium"]').classList.add('selected');
        this.ticketCounter++;
        this.updateTicketId();
      }

      updateTicketId() {
        const ticketId = `TK-2024-${String(this.ticketCounter).padStart(3, '0')}`;
        document.getElementById('ticket-id').textContent = ticketId;
      }

      showAllTickets() {
        alert('This feature would redirect to the tickets dashboard.');
      }
    }

    // Initialize the ticket system
    let ticketSystem;
    document.addEventListener('DOMContentLoaded', () => {
      ticketSystem = new TicketSystem();
    });
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9785e91f57a80423',t:'MTc1Njc0MTY5My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>